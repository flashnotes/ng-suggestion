"use strict";!function(e){e.module("ng-suggestion",["ng-dropdown"]).service("SuggestionService",["DropdownService",function(e){this.inputs=[],this.responseHandler=function(o){var n=this;return function(r){o.oldParams=o.params,r&&(e.open(o.dropdown.id),o.responseProperty?n.options=r[o.responseProperty]:n.options=r)}},this.keyUpHandler=function(o){var n=this;return function(){o.model?o.oldParams!==o.params&&(o.responseProperty?o.resource.get(o.params,n.responseHandler(o)):o.resource.query(o.params,n.responseHandler(o))):e.close(o.dropdown.id)}},this.focusHandler=function(o){return function(){o.model&&e.open(o.dropdown.id)}}}]).directive("suggestion",["$resource","SuggestionService",function(e,o){return{restrict:"A",scope:{suggestion:"=?",model:"=suggestionModel",url:"=suggestionUrl",params:"=suggestionParams",dropdown:"=suggestionDropdown",responseProperty:"@?suggestionResponseProperty"},link:function(n,r){var s={id:o.inputs.length,resource:e(n.url),responseProperty:n.responseProperty};n.suggestion=o.inputs[s.id]=s,n.$watch("dropdown",function(e){s.dropdown=e}),n.$watch("model",function(e){s.model=e}),n.$watch("params",function(e){s.params=e}),r.bind("keyup",o.keyUpHandler(s)),r.bind("focus",o.focusHandler(s))}}}])}(window.angular);