"use strict";!function(e){e.module("ng-suggestion",["ng-dropdown"]).service("SuggestionService",["DropdownService",function(e){this.inputs=[],this.responseHandler=function(o){return function(r){o.loading=!1,o.oldParams=o.params,r?(e.open(o.dropdown.id),o.responseProperty&&r[o.responseProperty]&&Array.isArray(r[o.responseProperty])&&r[o.responseProperty].length>0?o.options=r[o.responseProperty]:Array.isArray(r)&&r.length>0?o.options=r:o.options=!1):o.options=!1}},this.keyUpHandler=function(o){var r=this;return function(n){27===n.keyCode||9===n.keyCode?e.close(o.dropdown.id):o.model?o.oldParams!==o.params&&(o.loading=!0,o.responseProperty?o.resource.get(o.params,r.responseHandler(o)):o.resource.query(o.params,r.responseHandler(o))):e.close(o.dropdown.id)}}}]).directive("suggestion",["$resource","SuggestionService",function(e,o){return{restrict:"A",scope:{suggestion:"=?",model:"=suggestionModel",url:"=suggestionUrl",params:"=suggestionParams",dropdown:"=suggestionDropdown",responseProperty:"@?suggestionResponseProperty"},link:function(r,n){var s={id:o.inputs.length,element:n,resource:e(r.url),responseProperty:r.responseProperty};r.suggestion=o.inputs[s.id]=s,r.$watch("dropdown",function(e){s.dropdown=e}),r.$watch("model",function(e){s.model=e,delete o.options}),r.$watch("params",function(e){s.params=e}),n.bind("keyup paste",o.keyUpHandler(s))}}}])}(window.angular);